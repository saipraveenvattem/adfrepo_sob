{
	"$schema": "http://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#",
	"contentVersion": "1.0.0.0",
	"parameters": {
		"factoryName": {
			"type": "string",
			"metadata": "Data Factory name",
			"defaultValue": "datafactory-sobha-prod-uaen-001"
		},
		"Attendance_Server_Nex_gen_connectionString": {
			"type": "secureString",
			"metadata": "Secure string for 'connectionString' of 'Attendance_Server_Nex_gen'"
		},
		"LS_AzureDataLakeStorage_accountKey": {
			"type": "secureString",
			"metadata": "Secure string for 'accountKey' of 'LS_AzureDataLakeStorage'"
		},
		"LS_AzureSqlMI_SRC_connectionString": {
			"type": "secureString",
			"metadata": "Secure string for 'connectionString' of 'LS_AzureSqlMI_SRC'"
		},
		"LS_AzureSynapseAnalytics_DW_connectionString": {
			"type": "secureString",
			"metadata": "Secure string for 'connectionString' of 'LS_AzureSynapseAnalytics_DW'"
		},
		"LS_Azure_MySQL_DL_connectionString": {
			"type": "secureString",
			"metadata": "Secure string for 'connectionString' of 'LS_Azure_MySQL_DL'"
		},
		"LS_Azure_MySQL_FL_connectionString": {
			"type": "secureString",
			"metadata": "Secure string for 'connectionString' of 'LS_Azure_MySQL_FL'"
		},
		"Sobha_Azure_Attendance_connectionString": {
			"type": "secureString",
			"metadata": "Secure string for 'connectionString' of 'Sobha_Azure_Attendance'"
		},
		"Sobha_PG_DB_connectionString": {
			"type": "secureString",
			"metadata": "Secure string for 'connectionString' of 'Sobha_PG_DB'"
		},
		"LS_AzureDataLakeStorage_properties_typeProperties_url": {
			"type": "string",
			"defaultValue": "https://sobhadatalakestorage01.dfs.core.windows.net/"
		}
	},
	"variables": {
		"factoryId": "[concat('Microsoft.DataFactory/factories/', parameters('factoryName'))]"
	},
	"resources": [
		{
			"name": "[concat(parameters('factoryName'), '/Attendance_Server_Nex_gen')]",
			"type": "Microsoft.DataFactory/factories/linkedServices",
			"apiVersion": "2018-06-01",
			"properties": {
				"annotations": [],
				"type": "SqlServer",
				"typeProperties": {
					"connectionString": "[parameters('Attendance_Server_Nex_gen_connectionString')]"
				}
			},
			"dependsOn": []
		},
		{
			"name": "[concat(parameters('factoryName'), '/LS_AzureDataLakeStorage')]",
			"type": "Microsoft.DataFactory/factories/linkedServices",
			"apiVersion": "2018-06-01",
			"properties": {
				"annotations": [],
				"type": "AzureBlobFS",
				"typeProperties": {
					"url": "[parameters('LS_AzureDataLakeStorage_properties_typeProperties_url')]",
					"accountKey": {
						"type": "SecureString",
						"value": "[parameters('LS_AzureDataLakeStorage_accountKey')]"
					}
				}
			},
			"dependsOn": []
		},
		{
			"name": "[concat(parameters('factoryName'), '/LS_AzureSqlMI_SRC')]",
			"type": "Microsoft.DataFactory/factories/linkedServices",
			"apiVersion": "2018-06-01",
			"properties": {
				"annotations": [],
				"type": "AzureSqlMI",
				"typeProperties": {
					"connectionString": "[parameters('LS_AzureSqlMI_SRC_connectionString')]"
				}
			},
			"dependsOn": []
		},
		{
			"name": "[concat(parameters('factoryName'), '/LS_AzureSynapseAnalytics_DW')]",
			"type": "Microsoft.DataFactory/factories/linkedServices",
			"apiVersion": "2018-06-01",
			"properties": {
				"annotations": [],
				"type": "AzureSqlDW",
				"typeProperties": {
					"connectionString": "[parameters('LS_AzureSynapseAnalytics_DW_connectionString')]"
				}
			},
			"dependsOn": []
		},
		{
			"name": "[concat(parameters('factoryName'), '/LS_Azure_MySQL_DL')]",
			"type": "Microsoft.DataFactory/factories/linkedServices",
			"apiVersion": "2018-06-01",
			"properties": {
				"annotations": [],
				"type": "AzureMySql",
				"typeProperties": {
					"connectionString": "[parameters('LS_Azure_MySQL_DL_connectionString')]"
				}
			},
			"dependsOn": []
		},
		{
			"name": "[concat(parameters('factoryName'), '/LS_Azure_MySQL_FL')]",
			"type": "Microsoft.DataFactory/factories/linkedServices",
			"apiVersion": "2018-06-01",
			"properties": {
				"annotations": [],
				"type": "AzureMySql",
				"typeProperties": {
					"connectionString": "[parameters('LS_Azure_MySQL_FL_connectionString')]"
				}
			},
			"dependsOn": []
		},
		{
			"name": "[concat(parameters('factoryName'), '/Sobha_Azure_Attendance')]",
			"type": "Microsoft.DataFactory/factories/linkedServices",
			"apiVersion": "2018-06-01",
			"properties": {
				"annotations": [],
				"type": "AzureSqlDatabase",
				"typeProperties": {
					"connectionString": "[parameters('Sobha_Azure_Attendance_connectionString')]"
				}
			},
			"dependsOn": []
		},
		{
			"name": "[concat(parameters('factoryName'), '/Sobha_PG_DB')]",
			"type": "Microsoft.DataFactory/factories/linkedServices",
			"apiVersion": "2018-06-01",
			"properties": {
				"annotations": [],
				"type": "AzureSqlDatabase",
				"typeProperties": {
					"connectionString": "[parameters('Sobha_PG_DB_connectionString')]"
				}
			},
			"dependsOn": []
		},
		{
			"name": "[concat(parameters('factoryName'), '/AzIntegrationAttendance')]",
			"type": "Microsoft.DataFactory/factories/integrationRuntimes",
			"apiVersion": "2018-06-01",
			"properties": {
				"type": "Managed",
				"typeProperties": {
					"computeProperties": {
						"location": "UAE North",
						"dataFlowProperties": {
							"computeType": "MemoryOptimized",
							"coreCount": 32,
							"timeToLive": 10,
							"cleanup": false
						}
					}
				}
			},
			"dependsOn": []
		},
		{
			"name": "[concat(parameters('factoryName'), '/IR-DataFlow-8')]",
			"type": "Microsoft.DataFactory/factories/integrationRuntimes",
			"apiVersion": "2018-06-01",
			"properties": {
				"type": "Managed",
				"typeProperties": {
					"computeProperties": {
						"location": "UAE North",
						"dataFlowProperties": {
							"computeType": "MemoryOptimized",
							"coreCount": 16,
							"timeToLive": 10,
							"cleanup": false
						}
					}
				}
			},
			"dependsOn": []
		},
		{
			"name": "[concat(parameters('factoryName'), '/SobhaattendanceIR')]",
			"type": "Microsoft.DataFactory/factories/integrationRuntimes",
			"apiVersion": "2018-06-01",
			"properties": {
				"type": "SelfHosted",
				"typeProperties": {}
			},
			"dependsOn": []
		},
		{
			"name": "[concat(parameters('factoryName'), '/AZCheckinout')]",
			"type": "Microsoft.DataFactory/factories/datasets",
			"apiVersion": "2018-06-01",
			"properties": {
				"description": "Connect to your data destination store.",
				"linkedServiceName": {
					"referenceName": "Sobha_Azure_Attendance",
					"type": "LinkedServiceReference"
				},
				"annotations": [],
				"type": "AzureSqlTable",
				"structure": [
					{
						"name": "id",
						"type": "Int32"
					},
					{
						"name": "userid",
						"type": "Int32"
					},
					{
						"name": "checktime",
						"type": "DateTime"
					},
					{
						"name": "checktype",
						"type": "String"
					},
					{
						"name": "verifycode",
						"type": "Int32"
					},
					{
						"name": "SN",
						"type": "String"
					},
					{
						"name": "sensorid",
						"type": "String"
					},
					{
						"name": "WorkCode",
						"type": "String"
					},
					{
						"name": "Reserved",
						"type": "String"
					},
					{
						"name": "Last_Refresh_Date",
						"type": "DateTime"
					}
				],
				"typeProperties": {
					"tableName": "[[dbo].[Fact_Checkinout]"
				}
			},
			"dependsOn": [
				"[concat(variables('factoryId'), '/linkedServices/Sobha_Azure_Attendance')]"
			]
		},
		{
			"name": "[concat(parameters('factoryName'), '/AZuserinfo')]",
			"type": "Microsoft.DataFactory/factories/datasets",
			"apiVersion": "2018-06-01",
			"properties": {
				"description": "Connect to your data destination store.",
				"linkedServiceName": {
					"referenceName": "Sobha_Azure_Attendance",
					"type": "LinkedServiceReference"
				},
				"annotations": [],
				"type": "AzureSqlTable",
				"structure": [
					{
						"name": "userid",
						"type": "Int32"
					},
					{
						"name": "badgenumber",
						"type": "String"
					},
					{
						"name": "defaultdeptid",
						"type": "Int32"
					},
					{
						"name": "name",
						"type": "String"
					},
					{
						"name": "Password",
						"type": "String"
					},
					{
						"name": "Card",
						"type": "String"
					},
					{
						"name": "Privilege",
						"type": "String"
					},
					{
						"name": "AccGroup",
						"type": "String"
					},
					{
						"name": "TimeZones",
						"type": "String"
					},
					{
						"name": "Gender",
						"type": "String"
					},
					{
						"name": "Birthday",
						"type": "DateTime"
					},
					{
						"name": "street",
						"type": "String"
					},
					{
						"name": "zip",
						"type": "String"
					},
					{
						"name": "ophone",
						"type": "String"
					},
					{
						"name": "FPHONE",
						"type": "String"
					},
					{
						"name": "pager",
						"type": "String"
					},
					{
						"name": "minzu",
						"type": "String"
					},
					{
						"name": "title",
						"type": "String"
					},
					{
						"name": "SN",
						"type": "String"
					},
					{
						"name": "SSN",
						"type": "String"
					},
					{
						"name": "UTime",
						"type": "DateTime"
					},
					{
						"name": "State",
						"type": "String"
					},
					{
						"name": "City",
						"type": "String"
					},
					{
						"name": "SECURITYFLAGS",
						"type": "Int16"
					},
					{
						"name": "DelTag",
						"type": "Int16"
					},
					{
						"name": "RegisterOT",
						"type": "Int32"
					},
					{
						"name": "AutoSchPlan",
						"type": "String"
					},
					{
						"name": "MinAutoSchInterval",
						"type": "String"
					},
					{
						"name": "Image_id",
						"type": "Int32"
					},
					{
						"name": "Last_Refresh_Date",
						"type": "DateTime"
					}
				],
				"typeProperties": {
					"tableName": "[[dbo].[dim_userinfo]"
				}
			},
			"dependsOn": [
				"[concat(variables('factoryId'), '/linkedServices/Sobha_Azure_Attendance')]"
			]
		},
		{
			"name": "[concat(parameters('factoryName'), '/DS_DOOR_DELIVERY_M_TRG')]",
			"type": "Microsoft.DataFactory/factories/datasets",
			"apiVersion": "2018-06-01",
			"properties": {
				"linkedServiceName": {
					"referenceName": "LS_AzureSynapseAnalytics_DW",
					"type": "LinkedServiceReference"
				},
				"folder": {
					"name": "DWH/Facts"
				},
				"annotations": [],
				"type": "AzureSqlDWTable",
				"schema": [
					{
						"name": "ID",
						"type": "int",
						"precision": 10
					},
					{
						"name": "Project_ID",
						"type": "int",
						"precision": 10
					},
					{
						"name": "SBU_ID",
						"type": "int",
						"precision": 10
					},
					{
						"name": "Delivery_Order_No",
						"type": "nvarchar"
					},
					{
						"name": "Delivery_Date",
						"type": "nvarchar"
					},
					{
						"name": "Door_Type",
						"type": "nvarchar"
					},
					{
						"name": "Element",
						"type": "nvarchar"
					},
					{
						"name": "Vendor",
						"type": "nvarchar"
					},
					{
						"name": "SUM_ASA",
						"type": "nvarchar"
					},
					{
						"name": "MIN_ASA",
						"type": "nvarchar"
					},
					{
						"name": "Used_Data",
						"type": "nvarchar"
					},
					{
						"name": "Update_Date",
						"type": "date"
					},
					{
						"name": "LoadDateTime",
						"type": "datetime",
						"precision": 23,
						"scale": 3
					},
					{
						"name": "MIN_ASA_DELIVERED",
						"type": "nvarchar"
					}
				],
				"typeProperties": {
					"schema": "DWH",
					"table": "DOOR_DELIVERY_M_FACT"
				}
			},
			"dependsOn": [
				"[concat(variables('factoryId'), '/linkedServices/LS_AzureSynapseAnalytics_DW')]"
			]
		},
		{
			"name": "[concat(parameters('factoryName'), '/DS_DT_CATEGORY_STG_SRC')]",
			"type": "Microsoft.DataFactory/factories/datasets",
			"apiVersion": "2018-06-01",
			"properties": {
				"linkedServiceName": {
					"referenceName": "LS_AzureSqlMI_SRC",
					"type": "LinkedServiceReference"
				},
				"folder": {
					"name": "Staging"
				},
				"annotations": [],
				"type": "AzureSqlMITable",
				"schema": [
					{
						"name": "id",
						"type": "bigint",
						"precision": 19
					},
					{
						"name": "category_name",
						"type": "nvarchar"
					},
					{
						"name": "status",
						"type": "int",
						"precision": 10
					},
					{
						"name": "created_at",
						"type": "datetime",
						"precision": 23,
						"scale": 3
					},
					{
						"name": "updated_at",
						"type": "datetime",
						"precision": 23,
						"scale": 3
					},
					{
						"name": "created_by",
						"type": "nvarchar"
					},
					{
						"name": "updated_by",
						"type": "nvarchar"
					}
				],
				"typeProperties": {
					"schema": "dbo",
					"table": "category"
				}
			},
			"dependsOn": [
				"[concat(variables('factoryId'), '/linkedServices/LS_AzureSqlMI_SRC')]"
			]
		},
		{
			"name": "[concat(parameters('factoryName'), '/DS_DT_CATEGORY_STG_TRG')]",
			"type": "Microsoft.DataFactory/factories/datasets",
			"apiVersion": "2018-06-01",
			"properties": {
				"linkedServiceName": {
					"referenceName": "LS_AzureSynapseAnalytics_DW",
					"type": "LinkedServiceReference"
				},
				"folder": {
					"name": "Staging"
				},
				"annotations": [],
				"type": "AzureSqlDWTable",
				"schema": [
					{
						"name": "Category_ID",
						"type": "int",
						"precision": 10
					},
					{
						"name": "category_Name",
						"type": "nvarchar"
					},
					{
						"name": "status",
						"type": "int",
						"precision": 10
					},
					{
						"name": "created_at",
						"type": "datetime",
						"precision": 23,
						"scale": 3
					},
					{
						"name": "updated_at",
						"type": "datetime",
						"precision": 23,
						"scale": 3
					},
					{
						"name": "created_by",
						"type": "nvarchar"
					},
					{
						"name": "updated_by",
						"type": "nvarchar"
					}
				],
				"typeProperties": {
					"schema": "STG",
					"table": "DT_CATEGORY_STG"
				}
			},
			"dependsOn": [
				"[concat(variables('factoryId'), '/linkedServices/LS_AzureSynapseAnalytics_DW')]"
			]
		},
		{
			"name": "[concat(parameters('factoryName'), '/DS_DT_DEPARTMENT_STG_SRC')]",
			"type": "Microsoft.DataFactory/factories/datasets",
			"apiVersion": "2018-06-01",
			"properties": {
				"linkedServiceName": {
					"referenceName": "LS_AzureSqlMI_SRC",
					"type": "LinkedServiceReference"
				},
				"folder": {
					"name": "Staging"
				},
				"annotations": [],
				"type": "AzureSqlMITable",
				"schema": [
					{
						"name": "id",
						"type": "bigint",
						"precision": 19
					},
					{
						"name": "department_name",
						"type": "nvarchar"
					},
					{
						"name": "status",
						"type": "int",
						"precision": 10
					},
					{
						"name": "created_at",
						"type": "datetime",
						"precision": 23,
						"scale": 3
					},
					{
						"name": "updated_at",
						"type": "datetime",
						"precision": 23,
						"scale": 3
					},
					{
						"name": "created_by",
						"type": "nvarchar"
					},
					{
						"name": "updated_by",
						"type": "nvarchar"
					}
				],
				"typeProperties": {
					"schema": "dbo",
					"table": "department"
				}
			},
			"dependsOn": [
				"[concat(variables('factoryId'), '/linkedServices/LS_AzureSqlMI_SRC')]"
			]
		},
		{
			"name": "[concat(parameters('factoryName'), '/DS_DT_DEPARTMENT_STG_TRG')]",
			"type": "Microsoft.DataFactory/factories/datasets",
			"apiVersion": "2018-06-01",
			"properties": {
				"linkedServiceName": {
					"referenceName": "LS_AzureSynapseAnalytics_DW",
					"type": "LinkedServiceReference"
				},
				"folder": {
					"name": "Staging"
				},
				"annotations": [],
				"type": "AzureSqlDWTable",
				"schema": [
					{
						"name": "DEPARTMENT_ID",
						"type": "int",
						"precision": 10
					},
					{
						"name": "Department_name",
						"type": "nvarchar"
					},
					{
						"name": "Status",
						"type": "int",
						"precision": 10
					},
					{
						"name": "Created_at",
						"type": "datetime",
						"precision": 23,
						"scale": 3
					},
					{
						"name": "Updated_at",
						"type": "datetime",
						"precision": 23,
						"scale": 3
					},
					{
						"name": "Created_by",
						"type": "nvarchar"
					},
					{
						"name": "Updated_by",
						"type": "nvarchar"
					}
				],
				"typeProperties": {
					"schema": "STG",
					"table": "DT_DEPARTMENT_STG"
				}
			},
			"dependsOn": [
				"[concat(variables('factoryId'), '/linkedServices/LS_AzureSynapseAnalytics_DW')]"
			]
		},
		{
			"name": "[concat(parameters('factoryName'), '/DS_DT_DRAWING_TRACKER_HEADER_STG_SRC')]",
			"type": "Microsoft.DataFactory/factories/datasets",
			"apiVersion": "2018-06-01",
			"properties": {
				"linkedServiceName": {
					"referenceName": "LS_AzureSqlMI_SRC",
					"type": "LinkedServiceReference"
				},
				"folder": {
					"name": "Staging"
				},
				"annotations": [],
				"type": "AzureSqlMITable",
				"schema": [
					{
						"name": "id",
						"type": "bigint",
						"precision": 19
					},
					{
						"name": "drawing_number",
						"type": "nvarchar"
					},
					{
						"name": "drawing_title",
						"type": "nvarchar"
					},
					{
						"name": "project_id",
						"type": "int",
						"precision": 10
					},
					{
						"name": "category_id",
						"type": "int",
						"precision": 10
					},
					{
						"name": "subcategory_id",
						"type": "int",
						"precision": 10
					},
					{
						"name": "scheduled_date",
						"type": "date"
					},
					{
						"name": "pnca_committed_date",
						"type": "date"
					},
					{
						"name": "actual_received_date",
						"type": "date"
					},
					{
						"name": "last_revision_title",
						"type": "nvarchar"
					},
					{
						"name": "revision_count",
						"type": "nvarchar"
					},
					{
						"name": "remarks",
						"type": "nvarchar"
					},
					{
						"name": "priority",
						"type": "nvarchar"
					},
					{
						"name": "status",
						"type": "int",
						"precision": 10
					},
					{
						"name": "created_at",
						"type": "datetime",
						"precision": 23,
						"scale": 3
					},
					{
						"name": "updated_at",
						"type": "datetime",
						"precision": 23,
						"scale": 3
					},
					{
						"name": "created_by",
						"type": "nvarchar"
					},
					{
						"name": "updated_by",
						"type": "nvarchar"
					}
				],
				"typeProperties": {
					"schema": "dbo",
					"table": "drawing_tracker_header"
				}
			},
			"dependsOn": [
				"[concat(variables('factoryId'), '/linkedServices/LS_AzureSqlMI_SRC')]"
			]
		},
		{
			"name": "[concat(parameters('factoryName'), '/DS_DT_DRAWING_TRACKER_HEADER_STG_TRG')]",
			"type": "Microsoft.DataFactory/factories/datasets",
			"apiVersion": "2018-06-01",
			"properties": {
				"linkedServiceName": {
					"referenceName": "LS_AzureSynapseAnalytics_DW",
					"type": "LinkedServiceReference"
				},
				"folder": {
					"name": "Staging"
				},
				"annotations": [],
				"type": "AzureSqlDWTable",
				"schema": [
					{
						"name": "DRAWING_TRACKER_HEADER_ID",
						"type": "int",
						"precision": 10
					},
					{
						"name": "drawing_number",
						"type": "nvarchar"
					},
					{
						"name": "drawing_title",
						"type": "nvarchar"
					},
					{
						"name": "project_id",
						"type": "int",
						"precision": 10
					},
					{
						"name": "category_id",
						"type": "int",
						"precision": 10
					},
					{
						"name": "subcategory_id",
						"type": "int",
						"precision": 10
					},
					{
						"name": "scheduled_date",
						"type": "date"
					},
					{
						"name": "pnca_committed_date",
						"type": "date"
					},
					{
						"name": "actual_received_date",
						"type": "date"
					},
					{
						"name": "last_revision_title",
						"type": "nvarchar"
					},
					{
						"name": "revision_count",
						"type": "nvarchar"
					},
					{
						"name": "remarks",
						"type": "nvarchar"
					},
					{
						"name": "priority",
						"type": "nvarchar"
					},
					{
						"name": "status",
						"type": "int",
						"precision": 10
					},
					{
						"name": "created_at",
						"type": "datetime",
						"precision": 23,
						"scale": 3
					},
					{
						"name": "updated_at",
						"type": "datetime",
						"precision": 23,
						"scale": 3
					},
					{
						"name": "created_by",
						"type": "nvarchar"
					},
					{
						"name": "updated_by",
						"type": "nvarchar"
					}
				],
				"typeProperties": {
					"schema": "STG",
					"table": "DT_DRAWING_TRACKER_HEADER_STG"
				}
			},
			"dependsOn": [
				"[concat(variables('factoryId'), '/linkedServices/LS_AzureSynapseAnalytics_DW')]"
			]
		}
	]
}